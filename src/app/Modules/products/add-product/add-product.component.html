<div fxHeight="100% - 20px" fxWidth="100% - 20px" layout="m-10" class="">
  <div fxAlign="space-between center">
    <h2>Add Product</h2>
  </div>
  <form [formGroup]="productForm" fxHeight="100% - 35px" fxLayout="row" fxAlign="space-between center">
    <div layout="p-l-10 p-b-10 p-t-10 p-r-20" fxHeight="100% - 20px" fxWidth="60%" class="left-container"
      fxLayout="column">
      <mat-form-field appearance="outline" fxWidth="50%">
        <mat-label>Product Name</mat-label>
        <input matInput formControlName="name" placeholder="Enter Product Name">
      </mat-form-field>
      <div fxWidth="100%" fxAlign="start center" fxGap="2">
        <mat-form-field appearance="outline">
          <mat-label>Select Category</mat-label>
          <mat-select formControlName="category" (selectionChange)="onSelectCategory($event)">
            <mat-option *ngFor="let category of categories" [value]="category">{{category | titlecase}}</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Select Sub-Category</mat-label>
          <mat-select formControlName="subCategory" (selectionChange)=" onSelectSubCategory($event)">
            <mat-option>None</mat-option>
            <mat-option *ngFor="let subCategory of subCategories" [value]="subCategory">{{subCategory |
              titlecase}}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div fxWidth="100%" fxAlign="space-between center" fxGap="2">
        <mat-form-field appearance="outline">
          <mat-label>Enter MRP</mat-label>
          <input matInput formControlName="mrp" (input)="onInputChange($event)" placeholder="Enter MRP">
        </mat-form-field>
        <div layout="m-b-22" fxWidth="35%" fxAlign="center center">
          <mat-checkbox color="primary" formControlName="isDiscount" (change)="changeInDiscount($event)">Add
            Discount</mat-checkbox>
        </div>
        <mat-form-field fxWidth="25%" appearance="outline">
          <mat-label>Discount (%)</mat-label>
          <input matInput placeholder="Discount" formControlName="discount">
        </mat-form-field>
        <mat-form-field fxWidth="20%" appearance="outline">
          <mat-label>Final Amount</mat-label>
          <input matInput readonly="true" [value]="getFinalAmt()">
        </mat-form-field>
      </div>
      <div fxWidth="100%" fxAlign="start center" fxGap="2">

        <mat-form-field appearance="outline">
          <mat-label>Brand</mat-label>
          <mat-select formControlName="brand">
            <mat-option>None</mat-option>
            <mat-option *ngFor="let brand of brandList" [value]="brand">{{brand | titlecase}}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field fxWidth="20%" appearance="outline">
          <mat-label>Stock</mat-label>
          <input matInput placeholder="Stock" (input)="onInputChange($event)" formControlName="stock">
        </mat-form-field>
        <div layout="m-b-22" fxAlign="center center">
          <mat-checkbox color="primary" layout="m-r-20" formControlName="isMostSelling">Is Most Selling
            Product</mat-checkbox>
          <mat-checkbox color="primary" formControlName="isPopular">Is Popular</mat-checkbox>
        </div>
      </div>
      <div fxWidth="100%" layout="m-b-10" fxAlign="start center">
        <mat-checkbox color="primary" formControlName="isLatest">Is Latest Product</mat-checkbox>
      </div>

      <mat-form-field fxWidth="100%" appearance="outline">
        <mat-label>Enter Description</mat-label>
        <textarea matInput formControlName="description" placeholder="Product Description" rows="4"></textarea>
      </mat-form-field>
      <h4 layout="m-b-10" *ngIf="productForm.controls['category'].value != ''">Filters(If any):</h4>
      <div fxWidth="100%" fxAlign="start center" fxGap="2" *ngIf="productForm.controls['category'].value != ''">
        <mat-form-field class="example-chip-list" fxWidth="100%">
          <mat-label>Product Keywords</mat-label>
          <mat-chip-grid #chipGrid aria-label="Fruit selection">
            <ng-container *ngFor="let filter of filteredKeyFilters; index as i">
              <mat-chip-row *ngIf="filter.selected" (removed)="removeKeyword(i)">
                {{filter.value}}
                <button matChipRemove [attr.aria-label]="'remove ' + filter">
                  <mat-icon>cancel</mat-icon>
                </button>
              </mat-chip-row>
            </ng-container>
          </mat-chip-grid>
          <input placeholder="New Filter Keyword..." #filterInput [matChipInputFor]="chipGrid" [matAutocomplete]="auto"
            [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [(ngModel)]="keyWordInput"
            (input)="onFilterInputChange(keyWordInput)" [ngModelOptions]="{standalone: true}" />
          <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
            <ng-container *ngFor="let item of filteredKeyFilters; ">
              <mat-option *ngIf="!item.selected" [value]="item">
                {{item.value}}
              </mat-option>

            </ng-container>
          </mat-autocomplete>
        </mat-form-field>
      </div>
    </div>
    <div class="divider"></div>
    <div layout="p-l-20 p-b-10 p-t-10 p-r-10" fxHeight="100% - 20px" fxWidth="40%" class="right-container"
      fxLayout="column" fxAlign="space-between start">

      <div fxLayout="column" fxWidth="100%">
        <mat-form-field appearance="outline">
          <mat-label>Enter Specifications</mat-label>
          <textarea matInput formControlName="specifications" placeholder="Product Specification" rows="4"></textarea>
        </mat-form-field>
        <div fxLayout="column" fxAlign="space-between start">
          <div fxWidth="100%" fxLayout="row" layout="m-b-20">
            <div class="imagePicker" fxLayout="row" layout="m-r-20" fxAlign="center center"
              (click)="productImg.value = ''; productImg.click();">
              <span class="file-upld-txt" layout="m-r-10">Add Images</span>
              <input type="file" accept="image/*" multiple name="product" id="product" #productImg hidden
                (change)="onFileChange(productImg)">
            </div>
          </div>

          <mat-radio-group [ngStyle]="{'width': '100%'}" formControlName="coverImage">
            <div [ngClass]="previewLocalImgs.length ? 'img-container':'img-container-empty'">
              <div class="container" fxAlign="space-between center"
                *ngFor="let img of previewLocalImgs; let i = index;">
                <mat-radio-button matTooltip="Mark as Cover Image" value="{{i}}"></mat-radio-button>
                <div class="img-content" fxAlign="center">
                  <img class="imgBox" src="{{img}}" alt="Product Image {{i}}">
                  <button mat-fab color="warn" class="delete-icn" aria-label="Delete Product Image"
                    (click)="onRemoveFile(i)"> <mat-icon>close</mat-icon> </button>
                </div>
              </div>
              <span *ngIf="!previewLocalImgs.length" class="file-upld-txt">No Images
                Found</span>
            </div>
          </mat-radio-group>
        </div>
      </div>

      <div fxWidth="100%" fxGap="4" fxAlign="end center">
        <button color="primary" mat-stroked-button routerLink="/products">Back</button>
        <button color="primary" mat-raised-button type="submit" (click)="onSaveProduct()">Save Product</button>
      </div>
    </div>
  </form>

</div>